import"bootstrap/dist/css/bootstrap.min.css";import{useState as e}from"react";import{jsxs as t,Fragment as n,jsx as a}from"react/jsx-runtime";function l(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!=typeof document){var a=document.head||document.getElementsByTagName("head")[0],l=document.createElement("style");l.type="text/css","top"===n&&a.firstChild?a.insertBefore(l,a.firstChild):a.appendChild(l),l.styleSheet?l.styleSheet.cssText=e:l.appendChild(document.createTextNode(e))}}l(".btn:focus{box-shadow:none;outline:none}.btn-danger{align-items:center;display:flex!important;font-size:14px;justify-content:center}.btn-group .btn{background:#fff;color:#333}.btn-group .btn:focus{box-shadow:none;outline:none}.btn-group .btn.active{background:blue;color:#fff;font-weight:600}.btn{font-size:14px;font-weight:400;padding:5px 8px}textarea{padding:6px 10px;width:100%}");const r={fields:[{name:"Theme",label:"Theme"},{name:"Sub-theme",label:"Sub-theme"},{name:"Reason",label:"Reason"},{name:"Source",label:"Source"},{name:"Rating",label:"Rating"},{name:"Time Period",label:"Time Period"},{name:"Customer ID",label:"Customer ID"}],conditions:[{name:"=",label:"Equals"},{name:"!=",label:"Does not equal"},{name:"LIKE",label:"Like"},{name:"Not Like",label:"Not Like"},{name:"IS NULL",label:"Is Empty"},{name:"IS",label:"Is"},{name:"IS NOT",label:"IS NOT"}]};l(".form-control:focus,.form-select:focus{box-shadow:none}.form-label{font-size:14px;margin-bottom:2px}.form-control{color:#333;font-size:16px;height:auto;padding:4px 10px}.myFormGroup{align-items:center;margin-bottom:10px}");const o=({filter:e,index:l,handleFieldChange:o,handleDeleteFilter:i,filterLength:d})=>t(n,{children:[a("textarea",{className:"border border-1",rows:"1",value:JSON.stringify(e),readOnly:!0,style:{display:"none"}}),t("div",{className:"row myFormGroup",children:[t("div",{className:"col-md-4",children:[a("label",{className:"form-label select-label",children:"Field"}),a("select",{name:"field",className:"form-select form-control",onChange:e=>o(e,l),value:e.field,children:r.fields.map((e=>a("option",{value:e.name,children:e.label},e.name)))})]}),t("div",{className:"col-md-4",children:[a("label",{className:"form-label select-label",children:"Condition"}),a("select",{name:"condition",className:"form-select form-control",onChange:e=>o(e,l),value:e.condition,children:r.conditions.map((e=>a("option",{value:e.name,children:e.label},e.name)))})]}),a("div",{className:"col-md-3",children:"string"===e.type&&t(n,{children:[a("label",{className:"form-label select-label",children:"Criteria"}),a("input",{name:"criteria",className:"form-input form-control",onChange:e=>o(e,l),value:e.criteria})]})}),t("div",{className:"col-md-1",children:[a("label",{className:"form-label select-label",children:" "}),d>1&&a("button",{className:"btn btn-danger d-block",onClick:()=>{i(l)},children:"X"})]})]})]});l(".btn-toggle,.condition-toggle{display:flex;justify-content:space-between!important;padding-right:18px}.group-container{background:#f0f8ff;border:1px solid #a9a9a9;border-radius:5px;margin:10px 0;padding:5px}");const i=({groupIndex:n,group:l,handleChangeGroupType:r,handleUpdateGroup:i,handleDeleteGroup:d})=>{const s={field:"theme",condition:"equals",criteria:"",type:"string"},[c,m]=e([s]);let b=Object.keys(l)[0];const p=e=>{m((t=>{const a=[...t];return a.splice(e,1),i(a,n),a}))},u=(e,t)=>{m((a=>{const l=[...a];return"condition"===e.target.name&&("IS NULL"===e.target.value?(l[t].type="empty",l[t].criteria=""):l[t].type="string"),l[t]={...l[t],[e.target.name]:e.target.value},i(l,n),l}))};return t("div",{className:"group-container",children:[a("textarea",{className:"border border-1",rows:"11",value:JSON.stringify(l,null,2),readOnly:!0,style:{display:"none"}}),t("div",{className:"border border-1 rounded mt-3 p-3",children:[t("div",{className:"condition-toggle mb-2",children:[t("div",{className:"btn-toggle btn-group",children:[a("button",{className:`btn btn-primary ${"and"===b&&"active"}`,"data-bs-toggle":"button",onClick:()=>r("and",n),children:"And"}),a("button",{className:`btn btn-primary ${"or"===b&&"active"}`,"data-bs-toggle":"button","aria-pressed":"true",onClick:()=>r("or",n),children:"Or"})]}),a("button",{className:"btn btn-alert border border-1",onClick:()=>d(n),children:"X"})]}),c.map(((e,t)=>a(o,{index:t,filter:e,handleFieldChange:u,handleDeleteFilter:p,filterLength:c.length},t))),a("button",{className:"btn btn-primary mt-1",onClick:e=>(e=>{e.preventDefault(),m((e=>{const t=[...e,s];return i(t,n),t}))})(e),children:"+ Add Filter"})]})]})};l(".query textarea{margin-bottom:20px;padding:6px 10px;width:100%}.btn,.query textarea:focus{outline:none}.btn{box-shadow:none!important}.bottom-btn{display:flex;justify-content:space-between;margin:50px auto 0;padding:0}.popup .mt-4{font-weight:600}");const d=()=>{const n={and:[{field:"theme",condition:"equals",criteria:"",type:"string"}]},[l,r]=e([n]),o=e=>{r((t=>{const n=[...t];return n.splice(e,1),n}))},d=(e,t)=>{r((n=>{const a=[...n];let l=Object.keys(a[t])[0];return a[t]={[e]:a[t][l]},a}))},s=(e,t)=>{r((n=>{const a=[...n];let l=Object.keys(a[t])[0];return a[t]={[l]:e},a}))};return t("div",{className:"popup",children:[t("div",{className:"container",children:[t("div",{className:"query",children:[a("h6",{children:"Build your query"}),a("div",{children:a("textarea",{className:"border border-1",rows:"5",readOnly:!0,value:JSON.stringify(l)})})]}),l.map(((e,t)=>a(i,{groupIndex:t,group:e,handleChangeGroupType:d,handleUpdateGroup:s,handleDeleteGroup:o},t))),a("button",{className:"btn btn-primary mt-4",onClick:e=>(e=>{e.preventDefault(),r([...l,n])})(e),children:"+ Add new group filter"})]}),t("div",{className:"bottom-btn col-md-10",children:[a("button",{className:"btn btn-light",children:"Back"}),a("button",{className:"btn btn-primary",children:"Finish"})]})]})};export{d as QueryBuilder,r as defaultRules};
