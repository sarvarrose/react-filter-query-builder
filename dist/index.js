"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),require("bootstrap/dist/css/bootstrap.min.css");var e=require("react"),t=require("react/jsx-runtime");function n(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!=typeof document){var a=document.head||document.getElementsByTagName("head")[0],l=document.createElement("style");l.type="text/css","top"===n&&a.firstChild?a.insertBefore(l,a.firstChild):a.appendChild(l),l.styleSheet?l.styleSheet.cssText=e:l.appendChild(document.createTextNode(e))}}n(".btn:focus{box-shadow:none;outline:none}.btn-danger{align-items:center;display:flex!important;font-size:14px;justify-content:center}.btn-group .btn{background:#fff;color:#333}.btn-group .btn:focus{box-shadow:none;outline:none}.btn-group .btn.active{background:blue;color:#fff;font-weight:600}.btn{font-size:14px;font-weight:400;padding:5px 8px}textarea{padding:6px 10px;width:100%}");const a={fields:[{name:"Theme",label:"Theme"},{name:"Sub-theme",label:"Sub-theme"},{name:"Reason",label:"Reason"},{name:"Source",label:"Source"},{name:"Rating",label:"Rating"},{name:"Time Period",label:"Time Period"},{name:"Customer ID",label:"Customer ID"}],conditions:[{name:"=",label:"Equals"},{name:"!=",label:"Does not equal"},{name:"LIKE",label:"Like"},{name:"Not Like",label:"Not Like"},{name:"IS NULL",label:"Is Empty"},{name:"IS",label:"Is"},{name:"IS NOT",label:"IS NOT"}]};n(".form-control:focus,.form-select:focus{box-shadow:none}.form-label{font-size:14px;margin-bottom:2px}.form-control{color:#333;font-size:16px;height:auto;padding:4px 10px}.myFormGroup{align-items:center;margin-bottom:10px}");const l=({filter:e,index:n,handleFieldChange:l,handleDeleteFilter:r,filterLength:o})=>t.jsxs(t.Fragment,{children:[t.jsx("textarea",{className:"border border-1",rows:"1",value:JSON.stringify(e),readOnly:!0,style:{display:"none"}}),t.jsxs("div",{className:"row myFormGroup",children:[t.jsxs("div",{className:"col-md-4",children:[t.jsx("label",{className:"form-label select-label",children:"Field"}),t.jsx("select",{name:"field",className:"form-select form-control",onChange:e=>l(e,n),value:e.field,children:a.fields.map((e=>t.jsx("option",{value:e.name,children:e.label},e.name)))})]}),t.jsxs("div",{className:"col-md-4",children:[t.jsx("label",{className:"form-label select-label",children:"Condition"}),t.jsx("select",{name:"condition",className:"form-select form-control",onChange:e=>l(e,n),value:e.condition,children:a.conditions.map((e=>t.jsx("option",{value:e.name,children:e.label},e.name)))})]}),t.jsx("div",{className:"col-md-3",children:"string"===e.type&&t.jsxs(t.Fragment,{children:[t.jsx("label",{className:"form-label select-label",children:"Criteria"}),t.jsx("input",{name:"criteria",className:"form-input form-control",onChange:e=>l(e,n),value:e.criteria})]})}),t.jsxs("div",{className:"col-md-1",children:[t.jsx("label",{className:"form-label select-label",children:" "}),o>1&&t.jsx("button",{className:"btn btn-danger d-block",onClick:()=>{r(n)},children:"X"})]})]})]});n(".btn-toggle,.condition-toggle{display:flex;justify-content:space-between!important;padding-right:18px}.group-container{background:#f0f8ff;border:1px solid #a9a9a9;border-radius:5px;margin:10px 0;padding:5px}");const r=({groupIndex:n,group:a,handleChangeGroupType:r,handleUpdateGroup:o,handleDeleteGroup:s})=>{const i={field:"theme",condition:"equals",criteria:"",type:"string"},[d,c]=e.useState([i]);let m=Object.keys(a)[0];const b=e=>{c((t=>{const a=[...t];return a.splice(e,1),o(a,n),a}))},u=(e,t)=>{c((a=>{const l=[...a];return"condition"===e.target.name&&("IS NULL"===e.target.value?(l[t].type="empty",l[t].criteria=""):l[t].type="string"),l[t]={...l[t],[e.target.name]:e.target.value},o(l,n),l}))};return t.jsxs("div",{className:"group-container",children:[t.jsx("textarea",{className:"border border-1",rows:"11",value:JSON.stringify(a,null,2),readOnly:!0,style:{display:"none"}}),t.jsxs("div",{className:"border border-1 rounded mt-3 p-3",children:[t.jsxs("div",{className:"condition-toggle mb-2",children:[t.jsxs("div",{className:"btn-toggle btn-group",children:[t.jsx("button",{className:`btn btn-primary ${"and"===m&&"active"}`,"data-bs-toggle":"button",onClick:()=>r("and",n),children:"And"}),t.jsx("button",{className:`btn btn-primary ${"or"===m&&"active"}`,"data-bs-toggle":"button","aria-pressed":"true",onClick:()=>r("or",n),children:"Or"})]}),t.jsx("button",{className:"btn btn-alert border border-1",onClick:()=>s(n),children:"X"})]}),d.map(((e,n)=>t.jsx(l,{index:n,filter:e,handleFieldChange:u,handleDeleteFilter:b,filterLength:d.length},n))),t.jsx("button",{className:"btn btn-primary mt-1",onClick:e=>(e=>{e.preventDefault(),c((e=>{const t=[...e,i];return o(t,n),t}))})(e),children:"+ Add Filter"})]})]})};n(".query textarea{margin-bottom:20px;padding:6px 10px;width:100%}.btn,.query textarea:focus{outline:none}.btn{box-shadow:none!important}.bottom-btn{display:flex;justify-content:space-between;margin:50px auto 0;padding:0}.popup .mt-4{font-weight:600}");exports.QueryBuilder=()=>{const n={and:[{field:"theme",condition:"equals",criteria:"",type:"string"}]},[a,l]=e.useState([n]),o=e=>{l((t=>{const n=[...t];return n.splice(e,1),n}))},s=(e,t)=>{l((n=>{const a=[...n];let l=Object.keys(a[t])[0];return a[t]={[e]:a[t][l]},a}))},i=(e,t)=>{l((n=>{const a=[...n];let l=Object.keys(a[t])[0];return a[t]={[l]:e},a}))};return t.jsxs("div",{className:"popup",children:[t.jsxs("div",{className:"container",children:[t.jsxs("div",{className:"query",children:[t.jsx("h6",{children:"Build your query"}),t.jsx("div",{children:t.jsx("textarea",{className:"border border-1",rows:"5",readOnly:!0,value:JSON.stringify(a)})})]}),a.map(((e,n)=>t.jsx(r,{groupIndex:n,group:e,handleChangeGroupType:s,handleUpdateGroup:i,handleDeleteGroup:o},n))),t.jsx("button",{className:"btn btn-primary mt-4",onClick:e=>(e=>{e.preventDefault(),l([...a,n])})(e),children:"+ Add new group filter"})]}),t.jsxs("div",{className:"bottom-btn col-md-10",children:[t.jsx("button",{className:"btn btn-light",children:"Back"}),t.jsx("button",{className:"btn btn-primary",children:"Finish"})]})]})},exports.defaultRules=a;
